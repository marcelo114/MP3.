<!DOCTYPE html><html><head><meta charset="utf-8"><style>/* ===== CSS ORIGINAL (100% INTACTO) ===== */
    :root {
      --primary-bg: #0a0a0a;
      --secondary-bg: #121212;
      --card-bg: #1e1e1e;
      --accent: #ff375f;
      --accent-hover: #ff4d6d;
      --text: #fff;
      --text-sec: #b3b3b3;
      --border: #2a2a2a;
      --radius: 12px;
      --shadow: 0 6px 20px rgba(0,0,0,0.5);
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: linear-gradient(135deg, var(--primary-bg), #1a1a1a);
      color: var(--text);
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      padding: 10px;
      font-size: 14px;
    }
    .container { max-width: 480px; margin: 0 auto; }
    .header { text-align: center; margin: 12px 0 20px; }
    h1 {
      font-size: 1.9rem;
      font-weight: 800;
      background: linear-gradient(90deg, var(--accent), #ff6b9d);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    h2 {
      font-size: 1.25rem;
      margin: 16px 0 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    h2 i {
      font-size: 1.1rem;
      background: rgba(255,55,95,0.15);
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: grid;
      place-items: center;
    }
    .section {
      background: var(--secondary-bg);
      border-radius: var(--radius);
      padding: 16px;
      margin-bottom: 16px;
      border: 1px solid var(--border);
    }
    .input-group { display: flex; flex-direction: column; gap: 10px; margin: 12px 0; }
    .input-with-icon { position: relative; }
    .input-with-icon i {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-sec);
    }
    input[type="text"] {
      width: 100%;
      padding: 12px 12px 12px 44px;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      background: var(--card-bg);
      color: var(--text);
      font-size: 0.95rem;
    }
    input[type="text"]:focus { border-color: var(--accent); outline: none; }
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: var(--radius);
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, var(--accent), var(--accent-hover));
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 0.95rem;
    }
    .btn:hover { transform: translateY(-1px); }
    .file-label {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 12px;
      border: 2px dashed var(--accent);
      border-radius: var(--radius);
      cursor: pointer;
      background: rgba(255,55,95,0.05);
      margin: 12px 0;
      font-size: 0.9rem;
      text-align: center;
    }
    .file-label i { font-size: 1.1rem; color: var(--accent); }
    input[type="file"] { display: none; }
    .count-badge {
      position: absolute;
      top: -6px;
      right: -6px;
      background: var(--accent);
      color: white;
      font-size: 0.7rem;
      padding: 2px 6px;
      border-radius: 12px;
      display: none;
    }
    .cd-container { display: flex; justify-content: center; margin: 12px 0; }
    .cd-disk {
      width: 180px;
      height: 180px;
      border-radius: 50%;
      overflow: hidden;
      border: 8px solid #000;
      box-shadow: 0 10px 30px rgba(0,0,0,0.7);
      background: #111;
    }
    #cd-cover { width: 100%; height: 100%; object-fit: cover; }
    .cd-disk.playing { animation: spin 18s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .now-playing {
      display: none;
      align-items: center;
      gap: 12px;
      background: rgba(255,55,95,0.1);
      padding: 10px;
      border-radius: var(--radius);
      margin: 10px 0;
    }
    .now-playing.show { display: flex; }
    .now-playing-cover {
      width: 50px;
      height: 50px;
      border-radius: 6px;
      overflow: hidden;
      flex-shrink: 0;
    }
    .now-playing-cover img { width: 100%; height: 100%; object-fit: cover; }
    .now-playing-info { flex: 1; overflow: hidden; }
    .now-playing-title {
      font-weight: 600;
      font-size: 0.95rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .now-playing-artist {
      font-size: 0.8rem;
      color: var(--text-sec);
    }
    .player-controls {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin: 12px 0;
      flex-wrap: wrap;
    }
    .btn-icon {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--card-bg);
      border: 1px solid var(--border);
      color: var(--text);
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    .btn-icon:hover { background: var(--accent); color: white; transform: scale(1.08); }
    .btn-icon.active { background: var(--accent); color: white; }
    audio { width: 100%; margin: 8px 0; }
    .progress-container {
      height: 3px;
      background: var(--border);
      border-radius: 2px;
      margin: 6px 0;
      display: none;
    }
    .progress-bar {
      height: 100%;
      background: var(--accent);
      width: 0;
      transition: width 0.2s;
    }
    .playlist-container { margin-top: 12px; }
    .playlist-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .playlist-header h3 { font-size: 1.1rem; }
    .playlist-count { font-size: 0.8rem; color: var(--text-sec); }
    .playlist {
      max-height: 220px;
      overflow-y: auto;
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 8px;
    }
    .playlist li {
      padding: 10px 12px;
      cursor: pointer;
      border-radius: 6px;
      margin-bottom: 4px;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .playlist li:hover, .playlist li.active { background: rgba(255,55,95,0.15); }
    .playlist li i { color: var(--text-sec); }
    .empty-state {
      text-align: center;
      padding: 30px 10px;
      color: var(--text-sec);
      font-size: 0.9rem;
    }
    .empty-state i { font-size: 2.5rem; opacity: 0.6; margin-bottom: 8px; }
    .converter-modal {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: none;
      align-items: flex-start;
      justify-content: center;
      background: rgba(0,0,0,0.75);
    }
    .modal-content {
      background: var(--card-bg);
      width: 92%;
      max-width: 500px;
      margin: 16px auto;
      max-height: 92vh;
      overflow-y: auto;
      border-radius: var(--radius);
      border: 1px solid var(--border);
    }
    .converter-header {
      padding: 12px 16px;
      background: linear-gradient(90deg, var(--accent), transparent);
      display: flex;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 2;
    }
    .close-btn {
      background: none;
      border: none;
      color: white;
      font-size: 1.6rem;
      cursor: pointer;
    }
    #converter-frame { width: 100%; height: 520px; border: none; background: white; }
    #converter-loading {
      padding: 60px 20px;
      text-align: center;
    }
    .spinner {
      border: 4px solid rgba(255,255,255,0.15);
      border-left-color: var(--accent);
      border-radius: 50%;
      width: 32px;
      height: 32px;
      animation: spin 1s linear infinite;
      margin: 0 auto 12px;
    }
    .status-message {
      position: fixed;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--accent);
      color: white;
      padding: 12px 20px;
      border-radius: var(--radius);
      z-index: 10000;
      font-size: 0.9rem;
      display: none;
    }
    .status-message.show { display: block; }
    @media (max-width: 500px) {
      .cd-disk { width: 160px; height: 160px; }
      .now-playing-cover { width: 44px; height: 44px; }
      .btn-icon { width: 40px; height: 40px; font-size: 1rem; }
      .playlist { max-height: 180px; }
      #converter-frame { height: 460px; }
    }

    /* ===== NOVOS ESTILOS (APENAS RÁDIO) ===== */
    .mode-toggle {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 15px;
    }
    .mode-btn {
      flex: 1;
      padding: 12px;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      background: var(--card-bg);
      color: var(--text-sec);
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .mode-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    .radio-stations {
      margin-top: 16px;
      display: none;
    }
    .radio-stations.show { display: block; }
    .stations-grid {
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: var(--card-bg);
      border-radius: var(--radius);
      padding: 12px;
      max-height: 200px;
      overflow-y: auto;
    }
    .station-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px;
      border-radius: 8px;
      background: rgba(255,255,255,0.03);
      cursor: pointer;
      transition: 0.1s;
    }
    .station-item:hover, .station-item.active {
      background: rgba(255,55,95,0.2);
    }
    .station-item i { color: var(--accent); width: 24px; text-align: center; }
    .station-info { flex: 1; }
    .station-name { font-weight: 600; font-size: 0.9rem; }
    .station-desc { font-size: 0.75rem; color: var(--text-sec); }</style></head><body><!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>MP3 Player + Rádio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f0f0f">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
</head>
<body>
  <div class="container">
    <header class="header">
      <h1><i class="fas fa-music"></i> MP3 Player + Rádio</h1>
    </header>

    <!-- SEÇÃO YOUTUBE CONVERSOR (100% ORIGINAL) -->
    <section class="section">
      <h2><i class="fab fa-youtube"></i> YouTube</h2>
      <div class="input-group">
        <div class="input-with-icon">
          <i class="fab fa-youtube"></i>
          <input type="text" id="yturl" placeholder="Cole link do YouTube...">
        </div>
        <button onclick="openConverter()" class="btn"><i class="fas fa-download"></i> Converter</button>
      </div>
      <div class="converter-modal" id="converter-container">
        <div class="modal-content">
          <div class="converter-header">
            <h3>Conversor YT → MP3</h3>
            <button class="close-btn" onclick="closeConverter()">×</button>
          </div>
          <div id="converter-loading">
            <div class="spinner"></div>
            <p>Carregando...</p>
          </div>
          <iframe id="converter-frame" src="" onload="document.getElementById('converter-loading').style.display='none'"></iframe>
        </div>
      </div>
      <div style="font-size:0.85rem; text-align:center; color:var(--text-sec); margin-top:8px;">
        Após baixar, volte e adicione o MP3 aqui (clique/arraste)
      </div>
    </section>

    <!-- SEÇÃO PLAYER LOCAL + RÁDIO INTEGRADO -->
    <section class="section">
      <h2><i class="fas fa-play-circle"></i> Player Local / Rádio</h2>

      <!-- BOTÕES DE TRANSIÇÃO MP3 / RÁDIO (NOVOS) -->
      <div class="mode-toggle">
        <button id="modeMp3Btn" class="mode-btn active" onclick="switchMode('mp3')">
          <i class="fas fa-music"></i> MP3
        </button>
        <button id="modeRadioBtn" class="mode-btn" onclick="switchMode('radio')">
          <i class="fas fa-radio"></i> Rádio
        </button>
      </div>

      <!-- ÁREA DE UPLOAD MP3 (ORIGINAL, sempre visível) -->
      <label class="file-label" id="file-label">
        <i class="fas fa-folder-open"></i>
        <input type="file" id="files" accept=".mp3,audio/mpeg" multiple>
        <span>Clique ou arraste MP3 aqui</span>
        <div class="count-badge" id="file-count">0</div>
      </label>

      <!-- CD e NOW PLAYING (ORIGINAL) -->
      <div id="cd-player" class="cd-container hidden">
        <div class="cd-disk">
          <img id="cd-cover" src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300" alt="Capa">
        </div>
      </div>
      <div class="now-playing" id="now-playing">
        <div class="now-playing-cover">
          <img id="now-playing-img" src="" alt="Capa">
        </div>
        <div class="now-playing-info">
          <div class="now-playing-title" id="now-playing-title">Nenhuma música</div>
          <div class="now-playing-artist" id="now-playing-artist">Selecione abaixo</div>
        </div>
      </div>

      <!-- BARRA DE PROGRESSO (ORIGINAL) -->
      <div class="progress-container" id="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>

      <!-- PLAYER DE ÁUDIO (ORIGINAL) -->
      <audio id="audio" controls></audio>

      <!-- CONTROLES (PLAY/PAUSE, ANTERIOR, PRÓXIMO, SHUFFLE, REPEAT) -->
      <div class="player-controls">
        <button onclick="playPrev()" class="btn-icon" id="prev-btn"><i class="fas fa-backward-step"></i></button>
        <button onclick="togglePlayPause()" class="btn-icon" id="play-pause-btn"><i class="fas fa-play"></i></button>
        <button onclick="playNext()" class="btn-icon" id="next-btn"><i class="fas fa-forward-step"></i></button>
        <button onclick="toggleShuffle()" class="btn-icon" id="shuffle-btn"><i class="fas fa-shuffle"></i></button>
        <button onclick="toggleRepeat()" class="btn-icon" id="repeat-btn"><i class="fas fa-repeat"></i></button>
      </div>

      <!-- LISTA DE ESTAÇÕES DE RÁDIO (NOVA, oculta por padrão) -->
      <div id="radio-stations" class="radio-stations">
        <div class="playlist-header">
          <h3><i class="fas fa-radio"></i> Estações</h3>
          <div id="station-count">5 estações</div>
        </div>
        <div class="stations-grid" id="stations-list"></div>
      </div>

      <!-- PLAYLIST MP3 (ORIGINAL, sempre visível) -->
      <div class="playlist-container">
        <div class="playlist-header">
          <h3>Playlist MP3</h3>
          <div id="playlist-count">0 músicas</div>
        </div>
        <div id="playlist-empty" class="empty-state">
          <i class="fas fa-music"></i>
          <p>Adicione músicas acima</p>
        </div>
        <ul id="playlist" class="playlist"></ul>
      </div>
    </section>
  </div>

  <div class="status-message" id="status-message"></div>

  
</body>
</html><script>// ============================================
    // CÓDIGO ORIGINAL (100% INTACTO, NENHUMA LINHA REMOVIDA)
    // ============================================
    let audio = document.getElementById('audio');
    let files = [], order = [], currentIndex = 0;
    let isShuffle = false, isRepeat = false, isPlaying = false;
    let trackMetadata = {};
    const playlistEl = document.getElementById('playlist');
    const nowPlaying = document.getElementById('now-playing');
    const nowTitle = document.getElementById('now-playing-title');
    const nowArtist = document.getElementById('now-playing-artist');
    const cdCover = document.getElementById('cd-cover');
    const cdContainer = document.getElementById('cd-player');
    const progressBar = document.getElementById('progress-bar');
    const progressCont = document.getElementById('progress-container');
    const fileCount = document.getElementById('file-count');
    const playlistCount = document.getElementById('playlist-count');
    const emptyState = document.getElementById('playlist-empty');
    const statusMsg = document.getElementById('status-message');

    function showStatus(msg, type='info') {
      statusMsg.textContent = msg;
      statusMsg.className = 'status-message show ' + type;
      setTimeout(() => statusMsg.classList.remove('show'), 3000);
    }

    document.getElementById('files').onchange = e => {
      const newFiles = [...e.target.files].filter(f => f.name.toLowerCase().endsWith('.mp3'));
      if (!newFiles.length) return showStatus('Nenhum MP3 válido', 'error');
      files.push(...newFiles);
      order = files.map((_,i)=>i);
      updateCounts();
      renderPlaylist();
      if (files.length === newFiles.length) play(0);
      showStatus(`${newFiles.length} adicionado(s)`);
    };

    function play(idx) {
      if (idx < 0 || idx >= order.length) return;
      currentIndex = idx;
      const file = files[order[idx]];
      audio.src = URL.createObjectURL(file);
      audio.play().then(() => {
        isPlaying = true;
        updatePlayPause();
        cdContainer.classList.remove('hidden');
        nowPlaying.classList.add('show');
        emptyState.style.display = 'none';
        updateNowPlaying(order[idx]);
        highlightTrack();
      }).catch(err => showStatus('Erro ao tocar', 'error'));
    }

    function updateNowPlaying(fileIdx) {
      const file = files[fileIdx];
      const meta = trackMetadata[fileIdx] || {title: file.name.replace(/\.mp3$/i,''), artist:'Desconhecido'};
      nowTitle.textContent = meta.title;
      nowArtist.textContent = meta.artist;
      if (meta.cover) {
        cdCover.src = meta.cover;
        document.getElementById('now-playing-img').src = meta.cover;
      }
    }

    function highlightTrack() {
      [...playlistEl.children].forEach((li,i) => li.classList.toggle('active', i === currentIndex));
    }

    function playNext() {
      let next = currentIndex + 1;
      if (next >= order.length) next = isRepeat ? 0 : currentIndex;
      play(next);
    }

    function playPrev() {
      let prev = currentIndex - 1;
      if (prev < 0) prev = isRepeat ? order.length - 1 : 0;
      play(prev);
    }

    function togglePlayPause() {
      if (audio.paused) audio.play();
      else audio.pause();
    }

    function updatePlayPause() {
      const icon = document.getElementById('play-pause-btn').querySelector('i');
      icon.className = isPlaying ? 'fas fa-pause' : 'fas fa-play';
    }

    audio.onplay = () => {
      isPlaying = true;
      updatePlayPause();
      cdContainer.querySelector('.cd-disk').classList.add('playing');
    };
    audio.onpause = () => {
      isPlaying = false;
      updatePlayPause();
      cdContainer.querySelector('.cd-disk').classList.remove('playing');
    };
    audio.onended = playNext;
    audio.ontimeupdate = () => {
      if (audio.duration) {
        progressBar.style.width = (audio.currentTime / audio.duration * 100) + '%';
        progressCont.style.display = 'block';
      }
    };

    function toggleShuffle() {
      isShuffle = !isShuffle;
      document.getElementById('shuffle-btn').classList.toggle('active', isShuffle);
      if (isShuffle) order.sort(() => Math.random() - 0.5);
      else order = files.map((_,i)=>i);
      renderPlaylist();
    }

    function toggleRepeat() {
      isRepeat = !isRepeat;
      document.getElementById('repeat-btn').classList.toggle('active', isRepeat);
    }

    function renderPlaylist() {
      playlistEl.innerHTML = '';
      if (!files.length) {
        emptyState.style.display = 'block';
        playlistCount.textContent = '0 músicas';
        return;
      }
      emptyState.style.display = 'none';
      playlistCount.textContent = files.length + ' músicas';
      order.forEach((fIdx, listIdx) => {
        const file = files[fIdx];
        const meta = trackMetadata[fIdx] || {title:file.name.replace(/\.mp3$/i,''), artist:'Desconhecido'};
        const li = document.createElement('li');
        li.innerHTML = `<i class="fas fa-music"></i> <span>${meta.title}</span> <small>${meta.artist}</small>`;
        li.onclick = () => play(listIdx);
        playlistEl.appendChild(li);
      });
      highlightTrack();
    }

    function updateCounts() {
      const cnt = files.length;
      fileCount.textContent = cnt;
      fileCount.style.display = cnt ? 'inline' : 'none';
    }

    function openConverter() {
      const url = document.getElementById('yturl').value.trim();
      if (!url || (!url.includes('youtube.com') && !url.includes('youtu.be'))) {
        return showStatus('Link inválido', 'error');
      }
      let convUrl = `https://ezconv.cc/?url=${encodeURIComponent(url)}`;
      const iframe = document.getElementById('converter-frame');
      const cont = document.getElementById('converter-container');
      iframe.src = convUrl;
      cont.style.display = 'flex';
      document.body.style.overflow = 'hidden';
      showStatus('Abrindo conversor...');
    }

    function closeConverter() {
      document.getElementById('converter-container').style.display = 'none';
      document.body.style.overflow = '';
    }

    document.addEventListener('DOMContentLoaded', () => {
      const label = document.getElementById('file-label');
      label.ondragover = e => { e.preventDefault(); label.style.borderColor = 'var(--accent)'; };
      label.ondragleave = () => label.style.borderColor = '';
      label.ondrop = e => {
        e.preventDefault();
        label.style.borderColor = '';
        document.getElementById('files').files = e.dataTransfer.files;
        document.getElementById('files').dispatchEvent(new Event('change'));
      };
    });

    // ============================================
    // NOVO CÓDIGO - RÁDIO ONLINE (SEM MODIFICAR O ORIGINAL)
    // ============================================
    let isRadioMode = false;            // false = MP3, true = Rádio
    let currentStationIndex = 0;
    const stations = [
      { name: 'Jovem Pan FM', desc: 'SP 100.9', url: 'https://streaming.jovempan.com.br/pan', cover: 'https://i.imgur.com/s4A6pNq.png' },
      { name: 'Antena 1', desc: 'Pop Rock', url: 'https://antenaone.crossradio.com.br/stream/1', cover: 'https://i.imgur.com/cC0kQzC.png' },
      { name: 'Mundo Livre FM', desc: 'Rock', url: 'https://worldfreeradio.radioca.st/1', cover: 'https://i.imgur.com/8P2J3Vn.png' },
      { name: 'Kiss FM', desc: 'Rock Clássico', url: 'https://stream.kissfm.com.br/kiss', cover: 'https://i.imgur.com/y76m3aH.png' },
      { name: 'Nova Brasil FM', desc: 'MPB', url: 'https://streaming.novabrasilfm.com.br/novabrasil', cover: 'https://i.imgur.com/m2eB7Rj.png' }
    ];

    const radioStationsDiv = document.getElementById('radio-stations');
    const stationsList = document.getElementById('stations-list');

    // Renderizar lista de estações
    function renderStations() {
      stationsList.innerHTML = '';
      stations.forEach((station, idx) => {
        const div = document.createElement('div');
        div.className = `station-item ${idx === currentStationIndex ? 'active' : ''}`;
        div.innerHTML = `
          <i class="fas fa-radio"></i>
          <div class="station-info">
            <div class="station-name">${station.name}</div>
            <div class="station-desc">${station.desc}</div>
          </div>
        `;
        div.onclick = () => playRadioStation(idx);
        stationsList.appendChild(div);
      });
      document.getElementById('station-count').innerText = stations.length + ' estações';
    }

    // Tocar estação de rádio
    function playRadioStation(index) {
      if (!isRadioMode) return;
      currentStationIndex = index;
      const station = stations[index];
      audio.src = station.url;
      audio.play().then(() => {
        isPlaying = true;
        updatePlayPause();
        cdContainer.classList.remove('hidden');
        nowPlaying.classList.add('show');
        // Atualizar now playing com dados da rádio
        nowTitle.textContent = station.name;
        nowArtist.textContent = station.desc;
        cdCover.src = station.cover || 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300';
        document.getElementById('now-playing-img').src = station.cover || 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300';
        // Destacar estação ativa
        document.querySelectorAll('.station-item').forEach((el, i) => {
          el.classList.toggle('active', i === index);
        });
        showStatus(`Tocando: ${station.name}`);
      }).catch(err => showStatus('Erro ao conectar na rádio', 'error'));
    }

    // Alternar entre modos MP3 / Rádio
    window.switchMode = function(mode) {
      isRadioMode = (mode === 'radio');
      // Atualizar botões de modo
      document.getElementById('modeMp3Btn').classList.toggle('active', !isRadioMode);
      document.getElementById('modeRadioBtn').classList.toggle('active', isRadioMode);
      
      // Parar áudio atual
      audio.pause();
      audio.currentTime = 0;
      isPlaying = false;
      updatePlayPause();
      cdContainer.querySelector('.cd-disk')?.classList.remove('playing');
      
      // Mostrar/esconder estações de rádio
      radioStationsDiv.classList.toggle('show', isRadioMode);
      
      if (isRadioMode) {
        // Se entrar no modo rádio, carregar primeira estação
        if (!stationsList.children.length) renderStations();
        playRadioStation(currentStationIndex);
      } else {
        // Voltar para MP3: restaurar playlist e, se houver músicas, tocar a atual
        nowPlaying.classList.remove('show'); // será exibido quando play() for chamado
        if (files.length > 0) {
          play(currentIndex);
        } else {
          // Reseta now playing
          nowTitle.textContent = 'Nenhuma música';
          nowArtist.textContent = 'Selecione abaixo';
          cdCover.src = 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=300';
          document.getElementById('now-playing-img').src = '';
        }
      }
    };

    // Sobrescrever funções de controle para suportar rádio (SEM QUEBRAR ORIGINAL)
    const originalPlayNext = playNext;
    const originalPlayPrev = playPrev;
    const originalTogglePlayPause = togglePlayPause;

    playNext = function() {
      if (isRadioMode) {
        let next = currentStationIndex + 1;
        if (next >= stations.length) next = 0;
        playRadioStation(next);
      } else {
        originalPlayNext();
      }
    };

    playPrev = function() {
      if (isRadioMode) {
        let prev = currentStationIndex - 1;
        if (prev < 0) prev = stations.length - 1;
        playRadioStation(prev);
      } else {
        originalPlayPrev();
      }
    };

    togglePlayPause = function() {
      if (isRadioMode) {
        if (audio.paused) audio.play();
        else audio.pause();
      } else {
        originalTogglePlayPause();
      }
    };

    // Ajustar onended para rádio (prosseguir para próxima estação automaticamente)
    audio.onended = function() {
      if (isRadioMode) {
        playNext();
      } else {
        playNext(); // já usa a função modificada
      }
    };

    // Inicializar estações ao carregar
    renderStations();</script></body></html>
