<!DOCTYPE html><html><head><meta charset="utf-8"><style>:root {
      --yt-black:        #0f0f0f;
      --yt-dark:         #181818;
      --yt-dark-2:       #212121;
      --yt-dark-3:       #303030;
      --yt-gray:         #aaaaaa;
      --yt-light-gray:   #cccccc;
      --yt-text:         #e1e1e1;
      --yt-red:          #c00;
      --yt-blue:         #065fd4;
      --radius:          12px;
      --radius-sm:       8px;
      --spacing:         16px;
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      background: var(--yt-black);
      color: var(--yt-text);
      font-family: 'Roboto', system-ui, -apple-system, sans-serif;
      min-height: 100vh;
      padding: 24px 16px;
      line-height: 1.4;
    }

    .container {
      max-width: 480px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 32px;
    }

    h1 {
      font-size: 1.9rem;
      font-weight: 500;
      color: white;
    }

    h2 {
      font-size: 1.38rem;
      font-weight: 500;
      margin-bottom: 16px;
      color: white;
    }

    .section {
      background: var(--yt-dark);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 32px;
      border: 1px solid var(--yt-dark-3);
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin: 16px 0 20px;
    }

    input[type="text"] {
      width: 100%;
      padding: 14px 16px;
      border: 1px solid var(--yt-dark-3);
      border-radius: var(--radius-sm);
      background: var(--yt-dark-2);
      color: var(--yt-text);
      font-size: 1rem;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: var(--yt-blue);
      box-shadow: 0 0 0 2px rgba(6,95,212,0.3);
    }

    input[type="file"] {
      display: none;
    }

    .file-label {
      display: block;
      padding: 16px;
      background: var(--yt-dark-2);
      border: 2px dashed var(--yt-dark-3);
      border-radius: var(--radius);
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      margin: 16px 0;
    }

    .file-label:hover {
      border-color: var(--yt-gray);
      background: var(--yt-dark-3);
    }

    .file-label span {
      color: var(--yt-gray);
      font-size: 0.95rem;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 999px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 0.97rem;
    }

    .btn-primary {
      background: var(--yt-red);
      color: white;
    }

    .btn-primary:hover {
      background: #d50000;
    }

    .btn-icon {
      background: var(--yt-dark-2);
      color: var(--yt-light-gray);
      padding: 10px 14px;
      min-width: 44px;
    }

    .btn-icon:hover {
      background: var(--yt-dark-3);
    }

    .btn.active {
      background: var(--yt-red) !important;
      color: white !important;
    }

    .player-controls {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin: 20px 0 24px;
    }

    audio {
      width: 100%;
      margin: 20px 0;
      filter: brightness(0.9) contrast(1.1);
      border-radius: var(--radius-sm);
    }

    .playlist {
      list-style: none;
      max-height: 320px;
      overflow-y: auto;
      border-top: 1px solid var(--yt-dark-3);
      padding-top: 8px;
    }

    .playlist li {
      padding: 12px 16px;
      cursor: pointer;
      border-radius: var(--radius-sm);
      transition: all 0.15s;
      font-size: 0.96rem;
    }

    .playlist li:hover {
      background: var(--yt-dark-2);
    }

    .playlist li.active {
      background: rgba(200,0,0,0.12);
      color: var(--yt-red);
      font-weight: 500;
    }

    .playlist::-webkit-scrollbar {
      width: 6px;
    }

    .playlist::-webkit-scrollbar-thumb {
      background: #555;
      border-radius: 3px;
    }

    .playlist::-webkit-scrollbar-thumb:hover {
      background: #777;
    }

    .info-text, .warning-text {
      font-size: 0.86rem;
      color: var(--yt-gray);
      text-align: center;
      margin-top: 16px;
    }

    .warning-text {
      color: #ff9800;
    }

    /* === ANIMA√á√ÉO DO CD === */
    .cd-container {
      display: flex;
      justify-content: center;
      margin: 20px 0;
      perspective: 1000px;
    }

    .cd-disk {
      width: 220px;
      height: 220px;
      border-radius: 50%;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6), inset 0 0 20px rgba(255,255,255,0.1);
      position: relative;
      background: #111;
      border: 8px solid #222;
    }

    #cd-cover {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
    }

    .cd-disk.playing {
      animation: spin 10s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    .cd-disk::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2), transparent 60%);
      pointer-events: none;
    }

    .hidden { display: none !important; }

    @media (max-width: 500px) {
      .section { padding: 20px; }
      .input-group { flex-direction: column; }
      .btn { width: 100%; padding: 14px; }
      .cd-disk { width: 180px; height: 180px; }
    }</style></head><body><!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>MP3 Player</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0f0f0f">

  <!-- Google Fonts Roboto -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- jsmediatags para ler capas dos MP3 -->
  

  
</head>
<body>

<div class="container">

  <header class="header">
    <h1>MP3 Player</h1>
  </header>

  <!-- Se√ß√£o YouTube -->
  <section class="section">
    <h2>Adicionar do YouTube</h2>
    
    <div class="input-group">
      <input type="text" id="yturl" placeholder="Cole o link do YouTube aqui..." autocomplete="off">
      <button onclick="openConverter()" class="btn btn-primary">Converter & Baixar</button>
    </div>
    
    <div class="info-text">
      Ap√≥s baixar o MP3, volte aqui e adicione o arquivo na √°rea abaixo (selecione ou arraste).
    </div>
    <div class="warning-text">
      Uso pessoal ‚Ä¢ Respeite os direitos autorais
    </div>
  </section>

  <!-- Se√ß√£o Player Local -->
  <section class="section">
    <h2>Player Local</h2>
    
    <label class="file-label">
      <input type="file" id="files" accept="audio/mpeg,audio/mp3" multiple webkitdirectory directory>
      <span>Selecionar arquivos ou pasta inteira</span>
    </label>

    <!-- √Årea do CD animado -->
    <div id="cd-player" class="cd-container hidden">
      <div class="cd-disk">
        <img id="cd-cover" src="https://via.placeholder.com/300/222/eee?text=Sem+Capa" alt="Capa da m√∫sica">
      </div>
    </div>

    <audio id="audio" controls></audio>

    <div class="player-controls">
      <button onclick="prev()" class="btn btn-icon" title="Anterior">‚èÆ</button>
      <button onclick="next()" class="btn btn-icon" title="Pr√≥xima">‚è≠</button>
      <button id="shuffleBtn" onclick="toggleShuffle()" class="btn btn-icon" title="Embaralhar">üîÄ</button>
    </div>

    <ul id="playlist" class="playlist"></ul>
  </section>

</div>



</body>
</html><script>// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//              PLAYER LOCAL
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let audio = document.getElementById('audio');
let fileInput = document.getElementById('files');
let playlistEl = document.getElementById('playlist');
let shuffleBtn = document.getElementById('shuffleBtn');
let cdCover = document.getElementById('cd-cover');
let cdContainer = document.getElementById('cd-player');
let cdDisk = document.querySelector('.cd-disk');

let files = [];
let order = [];
let currentIndex = 0;
let shuffle = false;
let currentCoverUrl = 'https://via.placeholder.com/300/222/eee?text=Sem+Capa';

fileInput.onchange = () => {
  files = [...fileInput.files].filter(f => f.type.startsWith('audio/'));
  order = files.map((_,i) => i);
  renderPlaylist();
  loadLastPosition() || play(0);
};

function renderPlaylist() {
  playlistEl.innerHTML = '';
  
  files.forEach((file, index) => {
    jsmediatags.read(file, {
      onSuccess: function(tag) {
        const tags = tag.tags || {};
        let displayName = file.name;
        
        if (tags.title) {
          displayName = tags.title;
          if (tags.artist) displayName = `${tags.artist} - ${displayName}`;
        }

        let li = document.createElement('li');
        li.textContent = displayName;
        li.onclick = () => play(index);
        playlistEl.appendChild(li);

        // Extrai capa apenas se for a m√∫sica atual (otimiza√ß√£o)
        if (index === currentIndex && tags.picture) {
          const picture = tags.picture;
          let base64String = "";
          for (let i = 0; i < picture.data.length; i++) {
            base64String += String.fromCharCode(picture.data[i]);
          }
          currentCoverUrl = `data:\( {picture.format};base64, \){window.btoa(base64String)}`;
          cdCover.src = currentCoverUrl;
        }
      },
      onError: function(error) {
        console.log("Erro ao ler tags de", file.name, error);
        let li = document.createElement('li');
        li.textContent = file.name;
        li.onclick = () => play(index);
        playlistEl.appendChild(li);
      }
    });
  });
  
  highlightCurrent();
}

function play(pos) {
  if (pos < 0 || pos >= order.length) return;
  
  currentIndex = pos;
  let file = files[order[pos]];
  audio.src = URL.createObjectURL(file);
  audio.play().catch(e => console.log("Erro play:", e));
  
  saveLastPosition();
  highlightCurrent();

  // Atualiza capa (j√° extra√≠da ou fallback)
  cdCover.src = currentCoverUrl;

  // Mostra e anima o CD
  cdContainer.classList.remove('hidden');
  cdDisk.classList.add('playing');

  // Para a anima√ß√£o quando pausar
  audio.onpause = () => cdDisk.classList.remove('playing');
  // Continua quando play novamente
  audio.onplay = () => cdDisk.classList.add('playing');
}

audio.onended = next;

function highlightCurrent() {
  [...playlistEl.children].forEach((li, i) => {
    li.classList.toggle('active', i === currentIndex);
  });
}

function next() {
  let nextPos = currentIndex + 1;
  if (nextPos >= order.length) nextPos = 0;
  play(nextPos);
}

function prev() {
  let prevPos = currentIndex - 1;
  if (prevPos < 0) prevPos = order.length - 1;
  play(prevPos);
}

function toggleShuffle() {
  shuffle = !shuffle;
  shuffleBtn.classList.toggle('active', shuffle);

  if (shuffle) {
    order.sort(() => Math.random() - 0.5);
  } else {
    order = files.map((_,i) => i);
  }
  
  renderPlaylist();
  play(0);
}

function saveLastPosition() {
  try {
    localStorage.setItem('lastPlayedIndex', currentIndex);
  } catch(e) {}
}

function loadLastPosition() {
  try {
    let saved = localStorage.getItem('lastPlayedIndex');
    if (saved !== null) {
      let idx = Number(saved);
      if (idx >= 0 && idx < order.length) {
        play(idx);
        return true;
      }
    }
  } catch(e) {}
  return false;
}

// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//              YOUTUBE ‚Üí MP3 (externo)
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function openConverter() {
  const url = document.getElementById('yturl').value.trim();
  if (!url) {
    alert("Cole um link do YouTube primeiro.");
    return;
  }

  if (!url.includes('youtube.com') && !url.includes('youtu.be')) {
    alert("Link n√£o parece ser do YouTube.");
    return;
  }

  const converterUrl = `https://cnvmp3.com/?url=${encodeURIComponent(url)}`;
  window.open(converterUrl, '_blank');
  
  alert("1. O conversor abrir√° em outra aba\n2. Baixe o MP3 (escolha 320kbps se dispon√≠vel)\n3. Volte aqui e adicione o arquivo baixado");
}</script></body></html>
