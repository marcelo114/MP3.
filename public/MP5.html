<!DOCTYPE html><html><head><meta charset="utf-8"><style>:root {
      --primary: #e74c3c;
      --primary-dark: #c0392b;
      --success: #2ecc71;
      --error: #e74c3c;
      --bg: #0f0f0f;
      --card: #1e1e1e;
      --text: #e0e0e0;
      --muted: #888;
    }

    body {
      font-family: system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 40px 20px;
      display: flex;
      justify-content: center;
    }

    .container { max-width: 580px; text-align: center; }

    h1 { font-size: 2.4rem; margin-bottom: 0.6rem; color: white; }

    .subtitle { color: var(--muted); margin-bottom: 2rem; font-size: 1.1rem; }

    .input-group { position: relative; margin-bottom: 1.5rem; }

    input {
      width: 100%;
      padding: 16px 20px 16px 50px;
      font-size: 1.1rem;
      background: var(--card);
      border: 2px solid #333;
      border-radius: 12px;
      color: white;
      outline: none;
    }

    input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(231,76,60,0.2); }

    .input-icon { position: absolute; left: 18px; top: 50%; transform: translateY(-50%); color: var(--muted); font-size: 1.3rem; }

    button {
      width: 100%;
      padding: 16px;
      font-size: 1.2rem;
      font-weight: 600;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    button:hover:not(:disabled) { background: var(--primary-dark); transform: translateY(-2px); }

    button:disabled { background: #444; cursor: not-allowed; }

    #result { margin-top: 2.5rem; display: none; background: var(--card); padding: 24px; border-radius: 12px; border: 1px solid #333; }

    #result.show { display: block; }

    .title { font-size: 1.35rem; margin-bottom: 1.5rem; word-break: break-word; color: white; }

    .download-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      background: var(--success);
      color: white;
      padding: 14px 32px;
      border-radius: 10px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
    }

    .download-btn:hover { background: #27ae60; transform: translateY(-3px); }

    .message { margin-top: 1.5rem; padding: 14px; border-radius: 10px; font-weight: 500; }

    .error { background: rgba(231,76,60,0.15); color: #ff6b6b; border: 1px solid rgba(231,76,60,0.3); }

    .success { background: rgba(46,204,113,0.15); color: #2ecc71; border: 1px solid rgba(46,204,113,0.3); }

    .info { background: rgba(52,152,219,0.15); color: #5dade2; border: 1px solid rgba(52,152,219,0.3); }

    .spinner { width: 20px; height: 20px; border: 3px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 1s linear infinite; }

    @keyframes spin { to { transform: rotate(360deg); } }

    .small-text { margin-top: 3rem; color: var(--muted); font-size: 0.95rem; line-height: 1.6; }</style></head><body><!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Extrair Áudio MP3 do YouTube</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  
  
</head>
<body>

<div class="container">
  <h1>Extrair Áudio MP3</h1>
  <p class="subtitle">Cole o link do YouTube e baixe apenas o áudio</p>

  <div class="input-group">
    <i class="fas fa-link input-icon"></i>
    <input type="text" id="url" placeholder="https://www.youtube.com/watch?v=... ou youtu.be/..." autocomplete="off" />
  </div>

  <button id="btnExtract" onclick="startProcess()">
    <span id="btnText">Extrair Áudio MP3</span>
    <span id="btnSpinner" class="spinner" style="display:none;"></span>
  </button>

  <div id="result">
    <div class="title" id="videoTitle">Carregando informações...</div>
    <a id="downloadBtn" class="download-btn" href="#" target="_blank" download style="display:none;">
      <i class="fas fa-download"></i> Baixar Áudio (MP3)
    </a>
  </div>

  <div id="message" class="message"></div>

  <div class="small-text">
    Uso pessoal apenas • Vídeos privados/restritos não funcionam<br>
    Powered by yt-video-audio-downloader-api (RapidAPI)
  </div>
</div>



</body>
</html><script>// ────────────────────────────────────────────────
// CONFIG – COLOQUE SUA CHAVE AQUI!
// ────────────────────────────────────────────────
const API = {
  base: "https://api.youtubedownloadapi.com/v1",
  host: "yt-video-audio-downloader-api.p.rapidapi.com",
  key: "SUA_CHAVE_RAPIDAPI_AQUI",  // ← OBRIGATÓRIO - pegue em https://rapidapi.com
};

// ────────────────────────────────────────────────
// FUNÇÕES AUXILIARES
// ────────────────────────────────────────────────
function showMessage(text, type = 'info') {
  const el = document.getElementById('message');
  el.className = `message ${type}`;
  el.textContent = text;
}

function clearMessage() { document.getElementById('message').textContent = ''; }

function setLoading(isLoading) {
  const btn = document.getElementById('btnExtract');
  document.getElementById('btnText').style.display = isLoading ? 'none' : 'inline';
  document.getElementById('btnSpinner').style.display = isLoading ? 'inline-block' : 'none';
  btn.disabled = isLoading;
}

function isValidYouTubeUrl(str) {
  if (!str) return false;
  const pattern = /^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/(watch\?v=|embed\/|shorts\/)?([\w-]{11})/;
  return pattern.test(str);
}

function extractVideoId(url) {
  const match = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i);
  return match ? match[1] : null;
}

async function delay(ms) { return new Promise(r => setTimeout(r, ms)); }

// ────────────────────────────────────────────────
// FLUXO PRINCIPAL
// 1. Pega info
// 2. Inicia download (audio)
// 3. Polling status até pronto
// 4. Mostra link
// ────────────────────────────────────────────────
async function startProcess() {
  const input = document.getElementById('url').value.trim();
  const result = document.getElementById('result');
  const titleEl = document.getElementById('videoTitle');
  const dlBtn = document.getElementById('downloadBtn');

  clearMessage();
  result.classList.remove('show');
  dlBtn.style.display = 'none';

  if (!input || !isValidYouTubeUrl(input)) {
    showMessage("Cole um link válido do YouTube (ex: watch?v= ou youtu.be)", 'error');
    return;
  }

  setLoading(true);
  showMessage("Obtendo informações do vídeo...", 'info');

  try {
    // 1. GET VIDEO INFO
    const infoRes = await fetch(`${API.base}/video_info`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-rapidapi-key': API.key,
        'X-RapidAPI-Host': API.host
      },
      body: JSON.stringify({ url: input })
    });

    if (!infoRes.ok) throw new Error(`Erro info: ${infoRes.status}`);

    const info = await infoRes.json();
    // Supondo que retorne { title, formats, ... } – ajuste conforme doc real
    titleEl.textContent = info.title || "Áudio extraído";

    showMessage("Iniciando conversão para MP3...", 'info');

    // 2. START DOWNLOAD (audio only)
    const dlRes = await fetch(`${API.base}/download`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-rapidapi-key': API.key,
        'X-RapidAPI-Host': API.host
      },
      body: JSON.stringify({
        url: input,
        format: "mp3",      // ou "audio" – teste qual funciona
        quality: "best"     // ou 128, 192, etc. se suportado
      })
    });

    if (!dlRes.ok) throw new Error(`Erro download init: ${dlRes.status}`);

    const dlData = await dlRes.json();
    const jobId = dlData.job_id || dlData.id;  // ajuste conforme retorno real (ex: job_123456)

    if (!jobId) throw new Error("Não recebeu ID do job");

    showMessage(`Processando... (job: ${jobId})`, 'info');

    // 3. POLLING STATUS
    let status = 'pending';
    let attempts = 0;
    const maxAttempts = 60; // \~5 min se delay 5s
    let fileUrl = null;

    while (status !== 'completed' && attempts < maxAttempts) {
      await delay(5000); // 5 segundos entre polls

      const statusRes = await fetch(`\( {API.base}/status/ \){jobId}`, {
        headers: {
          'x-rapidapi-key': API.key,
          'X-RapidAPI-Host': API.host
        }
      });

      if (!statusRes.ok) throw new Error("Erro ao checar status");

      const stData = await statusRes.json();
      status = stData.status?.toLowerCase();

      if (status === 'completed') {
        // Supondo que retorne o path ou direct url
        fileUrl = `\( {API.base}/file/ \){jobId}/audio.mp3`;  // ajuste conforme doc
        // ou stData.file_url / stData.download_url
      } else if (status === 'failed' || status === 'error') {
        throw new Error(stData.message || "Conversão falhou");
      }

      showMessage(`Aguarde... status: \( {status} ( \){attempts + 1}/${maxAttempts})`, 'info');
      attempts++;
    }

    if (!fileUrl) throw new Error("Tempo esgotado ou job não completou");

    // 4. MOSTRA BOTÃO DE DOWNLOAD
    dlBtn.href = fileUrl;
    dlBtn.style.display = 'inline-flex';
    result.classList.add('show');

    showMessage("Pronto! Clique para baixar o MP3.", 'success');

  } catch (err) {
    console.error(err);
    let msg = err.message;

    if (msg.includes('429') || msg.includes('quota')) {
      msg = "Limite da API atingido (quota free). Tente amanhã ou upgrade no RapidAPI.";
    } else if (msg.includes('401') || msg.includes('key')) {
      msg = "Chave API inválida. Verifique sua chave no RapidAPI.";
    }

    showMessage(`Erro: ${msg}`, 'error');
  } finally {
    setLoading(false);
  }
}</script></body></html>